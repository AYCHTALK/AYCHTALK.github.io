<html lang="en">
<head>
    <title>Mikado</title>
</head>
<body>
<h1>Benchmark: mikado-0.6.0</h1><hr>
<div id="result" style="white-space: pre; font-family: Monospaced, monospace"></div>
<div id="root"></div>
<!--
<script src="node_modules/mikado/src/config.js"></script>
<script type="module" src="node_modules/mikado/src/browser.js"></script>
-->
<script src="./dist/mikado.min.js"></script>
<script type="module">

    "use strict";

    import { suite, root } from "./../../bench.js";
    import template from "./template/proxy.es6.js";

    const mikado = new Mikado(root, template, {

        "store": true,
        "loose": true,
        "reuse": true,
        "pool": false,
        "cache": true
    });

    suite["mikado"] = function(items){

        const length = items.length;
        const size = mikado.length;

        for(let i = 0, item, store, keys; i < length; i++){

            item = items[i];

            if(i < size){

                store = mikado.data(i);
                keys || (keys = Object.keys(item));

                for(let x = 0, key; x < keys.length; x++){

                    key = keys[x];
                    store[key] = item[key];
                }
            }
            else{

                mikado.add(item);
            }
        }

        if(length < size){

            mikado.remove(length, size - length);
        }
    };

</script>
</body>
</html>