/**!
 * Mikado.js v0.4.2 (ES5)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/mikado
 */
(function(){'use strict';var m;Object.assign||(Object.assign=function(){var a=arguments,b=a.length,d=a[0];if(1<b)for(var c=1,e,f,h;c<b;c++){e=a[c];f=Object.keys(e);h=f.length;for(var k=0,g;k<h;k++)g=f[k],d[g]=e[g]}return d});Object.values||(Object.values=function(a){for(var b=Object.keys(a),d=b.length,c=Array(d),e=0;e<d;e++)c[e]=a[b[e]];return c});window.requestAnimationFrame||(window.requestAnimationFrame=window.setTimeout);window.cancelAnimationFrame||(window.cancelAnimationFrame=window.clearTimeout);
window.Promise||(window.Promise=function(){function a(b){this.o=null;var d=this;b(function(c){d.o&&(d.o(c),d.o=null)})}a.prototype.then=function(b){this.o=b};return a}());function n(a,b,d,c){window[(a?"add":"remove")+"EventListener"](b,d,c||{passive:!0,capture:!0})}function y(a,b){b||(b=a.type);var d=a.target,c=d,e=d["_e_"+b];if(e)c=d["_r_"+b];else{for(;c;){if(c===z)return;if(e=c.getAttribute(b)){if(-1!==e.indexOf(":")){var f=e.split(":"),h=f[1];e=0;for(c=c.parentElement;c!==z;){if(c.hasAttribute(h)){e=f[0];break}c=c.parentElement}}break}c=c.parentElement}if(!e)return;d["_e_"+b]=e;d["_r_"+b]=c}if(b=A[e])a.preventDefault(),b(c,a,d);a.stopPropagation()}
var D={},A={},z=document.body;E.prototype.route=function(a,b){A[a]=b;return this};var F="ontouchstart"in window||navigator.msMaxTouchPoints,G,H,I;if(F){var J=function(a,b){b&&(b=b[0]);G=b?b.clientX:a.pageX;H=b?b.clientY:a.pageY},aa=function(a){var b=G,d=H;J(a,a.changedTouches);50>Math.abs(G-b)&&50>Math.abs(H-d)&&y.call(this,a,"click")},ba=function(a){J(a,a.touches)};I=function(a){n(a,"touchstart",ba,!1);n(a,"touchend",aa,!1)}}
E.prototype.listen=function(a,b){D[a]||(F&&"click"===a?I(1):n(1,a,y,b||!0),D[a]=1);return this};E.prototype.unlisten=function(a,b){D[a]&&(F&&"click"===a?I(0):n(0,a,y,b||!0),D[a]=0);return this};m=E.prototype;m.move=function(a,b){if("number"===typeof a){var d=a;a=this.b[a]}else d=a._i;0>b&&(b=this.length+b-1);d!==b&&this.shift(a,b-d);return this};
m.shift=function(a,b,d){if(!b)return this;if("number"===typeof a){var c=a;a=this.b[a]}else c=a._i;var e=0>b;if(e&&c||!e&&c<this.length-1){b=e?Math.max(c+b,0):Math.min(c+b,this.length-1);var f=this.b[b],h=e&&1<c-b||!e&&1<b-c;if(!h&&this.F&&(this.store||this.v)){var k=this.store?this.store[c]:a._m;this.update(a,this.store?this.store[b]:f._m,d,b);this.update(f,k,d,c)}else e?this.root.insertBefore(a,f):b===this.length-1?this.root.appendChild(a):this.root.insertBefore(a,this.b[b+1]);if(h){f=this.b[c];
a=this.store&&this.store[c];if(e)for(e=c;e>b;e--)c=this.b[e]=this.b[e-1],c._i=e,this.store&&(this.store[e]=this.store[e-1]);else for(e=c;e<b;e++)c=this.b[e]=this.b[e+1],c._i=e,this.store&&(this.store[e]=this.store[e+1]);c=this.b[b]=f;c._i=b;this.store&&(this.store[b]=a)}else d=this.b,e=this.store,a._i=b,f._i=c,d[c]=f,d[b]=a,e&&(f=e[b],e[b]=e[c],e[c]=f)}return this};m.up=function(a,b){(!b||0<b)&&this.shift(a,-(b||1));return this};m.down=function(a,b){(!b||0<b)&&this.shift(a,b||1);return this};
m.first=function(a){return this.shift(a,-this.length)};m.last=function(a){return this.shift(a,this.length)};
m.swap=function(a,b,d){if(a!==b){if("number"===typeof a){var c=a;a=this.b[a]}else c=a._i;if("number"===typeof b){var e=b;b=this.b[b]}else e=b._i;if(c!==e)if(this.F&&(this.store||this.v)){var f=this.store?this.store[c]:a._m;this.update(a,this.store?this.store[e]:b._m,d,e);this.update(b,f,d,c)}else this.root.insertBefore(a,b),this.root.insertBefore(b,c+1===e?a:this.b[c+1]),a._i=e,b._i=c,this.b[c]=b,this.b[e]=a,this.store&&(a=this.store[e],this.store[e]=this.store[c],this.store[c]=a)}return this};var K=window.localStorage;E.prototype.export=function(){if(this.store)var a=this.store;else if(this.v){a=Array(this.length);for(var b=0;b<this.length;b++)a[b]=this.b[b]._m}a&&K.setItem(this.g,JSON.stringify(a));return this};E.prototype.import=function(){var a=K.getItem(this.g);a&&(this.store=a=JSON.parse(a));return this};var L={_x:function(a,b){a.nodeValue=b},_h:function(a,b){a.innerHTML=b},_c:function(a,b){a.className=b},_cs:function(a,b){(a._s||(a._s=a.style)).cssText=b},_a:function(a,b,d){a.setAttribute(d,b)}};function M(a,b,d){return new Proxy(a,{path:b,C:d,set:ca})}function ca(a,b,d){if(a[b]!==d){var c=this.C["data."+b];if(c)for(var e=0,f=c.length,h;e<f;e++)h=c[e],L[h[0]](this.path[h[1]],d,h[2]||b);a[b]=d}return!0}
if(!window.Proxy){var O=function(a,b){this.path=b.path;this.C=b.C;b=Object.keys(a);for(var d=0,c=b.length;d<c;d++){var e=b[d];this.o(a,e,a[e])}return a};O.prototype.o=function(a,b,d){var c=this,e=d;Object.defineProperty(a,b,{get:function(){return e},set:function(f){if(e!==f){var h=c.C["data."+b];if(h)for(var k=0,g=h.length,l;k<g;k++)l=h[k],L[l[0]](c.path[l[1]],f,l[2]||b);e=f}}})};window.Proxy=O};var P=window,Q=P.requestAnimationFrame,da=P.cancelAnimationFrame,R={store:!0,loose:!0,cache:!0,async:!1,reuse:!0,pool:!0,prefetch:!0},ea={},S={},T={},U={};function E(a,b,d){a.nodeType||(d=b,b=a,a=null);b||(d=a);a?this.mount(a):(this.root=this.b=null,this.length=0);this.init(b,d)}var V=E.register=function(a,b){b||(b=a,a=b.n);S[a]=b;return E},fa=E.new=function(a,b,d){return new E(a,b,d)};m=E.prototype;
m.mount=function(a){this.root!==a&&(this.root=a,W(this),this.b=a._d||(a._d=ha(a.children)),this.length=this.b.length);return this};m.sync=function(){this.root._d=this.b=ha(this.root.children);this.length=this.b.length;return this};m.index=function(a){return a._i};m.node=function(a){return this.b[a]};m.data=function(a){return this.v?this.b[a]._m:this.store[a]};m.find=function(a){for(var b=0;b<this.length;b++)if(this.data(b)===a)return this.b[b]};
m.search=function(a){a=Object.values(a).join("^");for(var b=0;b<this.length;b++)if(Object.values(this.data(b)).join("^")===a)return this.b[b]};m.where=function(a){for(var b=Object.keys(a),d=b.length,c=[],e=0,f,h;e<this.length;e++){f=this.data(e);h=!0;for(var k=0,g;k<d;k++)if(g=b[k],f[g]!==a[g]){h=!1;break}h&&(c[c.length]=this.b[e])}return c};
m.init=function(a,b){this.H=b=b?Object.assign({},this.H||R,b):R;"string"===typeof a?a=S[a]:V(a);this.cache=b.cache;this.async=b.async;this.o=0;this.F=b.reuse;this.state=b.state||ea;this.B=this.F&&b.pool;var d=b.store;d?((this.v="object"!==typeof d&&b.loose)?this.store=!1:this.store=(this.D="object"===typeof d)?d:[],this.proxy=null):this.proxy=this.v=this.store=!1;this.g!==a&&(this.g=a.n,this.A=this.l=null,this.u=a.d,this.w=null,this.G=b.prefetch&&X(this,a),W(this));return this};
E.once=function(a,b,d,c,e){fa(a,b).render(d,c,e).destroy(!0);return E};function W(a){if(a.root){var b=a.root._t;b!==a.g&&(a.root._t=a.g,b&&a.clear())}}function ha(a){for(var b=a.length,d=Array(b),c=0,e;c<b;c++)e=a[c],e._i=c,d[c]=e;return d}m=E.prototype;m.create=function(a,b,d){var c;this.B&&(c=U[this.g])&&c.length?(c=c.pop(),this.u||this.A(c._p||Y(this,c),c.$,a,d,b)):(c=this.G,c||(this.G=c=X(this,S[this.g])),this.u||this.A(c._p,c.$,a,d,b),c=c.cloneNode(!0));return c};
m.refresh=function(a,b){if("number"===typeof a)return this.update(this.b[a],null,b,a);b=a;a=this.store?this.store.length:this.length;this.v&&(this.store=null);for(var d=0;d<a;d++)this.update(this.b[d],null,b,d);return this};
m.render=function(a,b,d,c){if(!c){!b||"function"!==typeof b&&"boolean"!==typeof b||(d=b,b=null);this.o&&this.cancel();if(d){var e=this;this.o=Q(function(){e.o=0;e.render(a,b,null,!0);"function"===typeof d&&d()});return this}if(this.async){var f=this;return new Promise(function(x){f.o=Q(function(){f.o=0;f.render(a,b,null,!0);x()})})}}if(this.u)this.b[0]||this.add();else{var h=this.length;a?(c=a.length,"undefined"===typeof c&&(a=[a],c=1)):c=this.store?this.store.length:h;if(!c)return this.clear();this.F||
(this.clear(c),h=0);var k=h<c?h:c,g=0;if(k)for(;g<k;g++)this.update(this.b[g],a&&a[g],b,g);if(g<c)for(a||(a=this.store);g<c;g++)this.add(a[g],b);else if(c<h){this.store&&!this.D&&this.store.splice(c);h=this.b.splice(c);this.length=c;c=h.length;var l;if(this.B)if(l=U[this.g])var v=U.length;else l=U[this.g]=Array(c),v=0;k=0;for(g=void 0;k<c;k++)g=this.root.removeChild(h[k]),l&&(l[v++]=g)}}return this};
m.add=function(a,b){var d=this.length;b=this.create(a,b,d);this.proxy&&(a=M(a,b._p||Y(this,b),this.proxy));this.store?this.store[d]=a:this.v&&(b._m=a);b._i=d;this.root.appendChild(b);this.b[d]=b;this.length++;return this};m.clear=function(a){if(this.B&&this.length){var b=U[this.g]||(U[this.g]=[]);b.push.apply(b,this.b)}this.root._d=this.b=a?Array(a):[];this.root.textContent="";this.length=0;this.store&&!this.D&&(this.store=a?Array(a):[]);return this};
m.destroy=function(a){a&&this.unload();T[this.g+(this.cache?"$":"")]=null;this.B&&(U[this.g]=null);this.G=this.A=this.l=this.g=this.root=this.b=null;this.length=0;this.store=this.w=null};m.cancel=function(){this.o&&(da(this.o),this.o=null)};m.append=function(a,b){for(var d=a.length,c=0;c<d;c++)this.add(a[c],b);return this};
m.remove=function(a){if("number"===typeof a){var b=a;a=this.b[b]}else b=a._i;this.b.splice(b,1);this.store&&!this.D&&this.store.splice(b,1);if(this.B){var d=U[this.g]||(U[this.g]=[]);d[d.length]=a}this.root.removeChild(a);this.length--;for(a=b;a<this.length;a++)this.b[a]._i=a;return this};
m.replace=function(a,b,d,c){"undefined"===typeof c&&(c=a._i);d=this.create(b,d,c);this.proxy&&(b=M(b,d._p||Y(this,d),this.proxy));this.store?this.store[c]=b:this.v&&(d._m=b);d._i=c;this.root.replaceChild(d,a);this.b[c]=d;return this};m.update=function(a,b,d,c){this.store?b?this.store[c]=b:b=this.store[c]:this.v&&(b?a._m=b:b=a._m);this.A(a._p||Y(this,a),a.$,b,c,d);return this};
function Y(a,b){for(var d=a.l.length,c={},e=Array(d),f=0;f<d;f++){var h=a.l[f],k=f,g;if(!(g=c[h])){g=b;for(var l="",v=0;v<h.length;v++){var x=h[v];l+=x;c[l]?g=c[l]:(">"===x?g=g.firstElementChild:"+"===x?g=g.nextElementSibling:"|"===x&&(g=g.firstChild),c[l]=g)}}e[k]=g}b._p=e;b.$={};return e}var Z;
function X(a,b,d,c,e){var f=T[b.n+(a.cache?"$":"")];if(f)return a.A=f.A,a.u=f.u,a.w=f.w,a.proxy=f.proxy,a.l=f.l,f.node;f=document.createElement(b.t||"div");d||(d=0,c="&",Z="",a.l=[],f._p=e=[],f.$={});var h=b.s,k=b.i,g=b.x,l=b.h,v=b.a,x=b.e,q=b.c,r=b.j,p=a.l.length,u=0,t="";r&&(t+=";"+r,-1<t.indexOf("self")&&(a.l[p]=c,e[p]=f,u=2));q&&("object"===typeof q?(r=q[1],q=q[0],t+=a.cache?";v="+q+";if(self._c!==v){self._c=v;self.className=v}":";self.className="+q,r&&(a.proxy||(a.proxy={}),a.proxy[q]||(a.proxy[q]=
[]),a.proxy[q].push(["_c",p])),a.l[p]=c,e[p]=f,u++):f.className=q);if(v||x){var B;v&&(B=Object.keys(v));x&&(q=Object.keys(x),B=B?B.push.apply(B,q):q);for(q=0;q<B.length;q++){r=B[q];var w=void 0;v&&"undefined"!==typeof(w=v[r])||(w=x[r],a.listen(r));if("object"===typeof w){var N=w[1];w=w[0];t+=a.cache?";v="+w+";if(self['_a_"+r+"']!==v){self['_a_"+r+"']=v;self.setAttribute('"+r+"',v)}":";self.setAttribute('"+r+"',"+w+")";N&&(a.proxy||(a.proxy={}),a.proxy[w]||(a.proxy[w]=[]),a.proxy[w].push(["_a",p,r]));
N=!0;u++}else f.setAttribute(r,w)}N&&(a.l[p]=c,e[p]=f)}h&&("string"===typeof h?f.style.cssText=h:h.length&&(B=h[1],h=h[0],t+=a.cache?";v="+h+";if(self._cs!==v){self._cs=v;(self._s||(self._s=self.style)).cssText=v}":";self.style.cssText="+h,B&&(a.proxy||(a.proxy={}),a.proxy[h]||(a.proxy[h]=[]),a.proxy[h].push(["_cs",p])),a.l[p]=c,e[p]=f,u++));if(!k)if(b["@"]){a.w||(a.w=[]);var C=Z+=";this.include["+a.w.length+"].mount(p["+p+"]).render("+b.r+(b.m?".slice("+(0<b.m?"0,":"")+b.m+")":"")+",index,view)";
Z="";a.w.push(new E(f,"string"===typeof b["@"]?S[b["@"]]:b["@"],Object.assign(a.H,{store:!1,async:!1})));Z=C;a.l[p]=c;e[p]=f;a.u=!1}else if(b["+"])k=S[b["+"]];else if(g){c+="|";if(l="object"===typeof g)C=g[1],g=g[0];h=document.createTextNode(g);l&&(u&&(ia(u,t,p,a.cache),t="",p++),t+=a.cache?";v="+g+";if(self._x!==v){self._x=v;self.nodeValue=v}":";self.nodeValue="+g,C&&(a.proxy||(a.proxy={}),a.proxy[g]||(a.proxy[g]=[]),a.proxy[g].push(["_x",p])),a.l[p]=c,e[p]=h,u++);f.appendChild(h)}else l&&("object"===
typeof l?(C=l[1],l=l[0],t+=a.cache?";v="+l+";if(self._h!==v){self._h=v;self.innerHTML=v}":";self.innerHTML="+l,C&&(a.proxy||(a.proxy={}),a.proxy[l]||(a.proxy[l]=[]),a.proxy[l].push(["_h",p])),a.l[p]=c,e[p]=f,u++):f.innerHTML=l);b.f&&(Z+=";if("+b.f+"){"+(1<u?"self":"p["+p+"]")+".hidden=false",u||(a.l[p]=c,e[p]=f,a.u=!1));u&&(a.u=!1,ia(u,t,p,a.cache));if(k)if(k.length)for(C=">",g=0;g<k.length;g++){g&&(C+="+");l=k[g];if(t=l["+"])l=S[t];f.appendChild(X(a,l,d+g+1,c+C,e))}else{if(t=k["+"])k=S[t];f.appendChild(X(a,
k,d+1,c+">",e))}b.f&&(Z+="}else "+(1<u?"self":"p["+p+"]")+".hidden=true");d||(!a.u&&Z&&(a.A=Function("p","s","data","index","view",'"use strict";var self,v'+Z)),T[b.n+(a.cache?"$":"")]={A:a.A,u:a.u,w:a.w,proxy:a.proxy,l:a.l,node:f});return f}function ia(a,b,d,c){Z=c||1<a?Z+(";self=p["+d+"]"+b):Z+b.replace(/self/g,"p["+d+"]")}
E.prototype.load=function(a,b){if(S[a])this instanceof E&&this.init(S[a]),b&&b();else{var d=this,c=new XMLHttpRequest;c.overrideMimeType("application/json");c.open("GET",a,!1!==b);c.onload=function(){var e=this.responseText;if(e){try{var f=JSON.parse(e);V(f);d instanceof E&&d.init(f)}catch(k){var h=k}"function"===typeof b&&b(h)}};c.send()}};E.load=E.prototype.load;E.prototype.unload=function(a){a||(a=this.g);a&&(S[a]=null)};E.unregister=E.unload=E.prototype.unload;(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return E}):(b=a.modules)?b.mikado=E:"object"===typeof a.exports?a.module.exports=E:a.Mikado=E})();}).call(this);
