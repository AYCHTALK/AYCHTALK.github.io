/**
 * Mikado.js v0.0.84
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/mikado
 */
(function(){'use strict';var f;function g(a,b,d,c){window[(a?"add":"remove")+"EventListener"](b,d,c||{passive:!0,capture:!0})}function t(a,b){b||(b=a.type);var d=a.target,c=d,e=d["_e_"+b];if(e)c=d["_r_"+b];else{for(;c;){if(c===v)return;if(e=c.getAttribute(b)){if(-1!==e.indexOf(":")){var l=e.split(":"),h=l[1];e=0;for(c=c.parentElement;c!==v;){if(c.hasAttribute(h)){e=l[0];break}c=c.parentElement}}break}c=c.parentElement}if(!e)return;d["_e_"+b]=e;d["_r_"+b]=c}if(b=x[e])a.preventDefault(),b(c,a,d);a.stopPropagation()}
var z={},x={},v=document.body;A.prototype.route=function(a,b){x[a]=b;return this};var C="ontouchstart"in window||navigator.msMaxTouchPoints,D,E,F;if(C){var G=function(a,b){b&&(b=b[0]);D=b?b.clientX:a.pageX;E=b?b.clientY:a.pageY},H=function(a){var b=D,d=E;G(a,a.changedTouches);50>Math.abs(D-b)&&50>Math.abs(E-d)&&t.call(this,a,"click")},I=function(a){G(a,a.touches)};F=function(a){g(a,"touchstart",I,!1);g(a,"touchend",H,!1)}}
A.prototype.listen=function(a,b){z[a]||(C&&"click"===a?F(1):g(1,a,t,b||!0),z[a]=1);return this};A.prototype.unlisten=function(a,b){z[a]&&(C&&"click"===a?F(0):g(0,a,t,b||!0),z[a]=0);return this};f=A.prototype;f.up=function(a){if(a=a._i){var b=this.b[a],d=this.b[a-1];this.root.insertBefore(b,d);b._i=a-1;d._i=a;this.b[a]=d;this.b[a-1]=b;this.store&&(b=this.store[a-1],this.store[a-1]=this.store[a],this.store[a]=b)}};f.down=function(a){a=a._i;if(a<this.length-1){var b=this.b[a],d=this.b[a+1];a===this.length-2?this.root.appendChild(b):this.root.insertBefore(b,d);b._i=a+1;d._i=a;this.b[a]=d;this.b[a+1]=b;this.store&&(b=this.store[a+1],this.store[a+1]=this.store[a],this.store[a]=b)}};
f.first=function(a){var b=a._i;if(b){this.root.insertBefore(a,this.b[0]);a=this.b.splice(b,1)[0];this.b.unshift(a);for(a=0;a<=b;a++)this.b[a]._i=a;this.store&&(b=this.store.splice(b,1)[0],this.store.unshift(b))}};f.last=function(a){var b=a._i;if(b<this.length-1){this.root.appendChild(a);a=this.b.splice(b,1)[0];this.b.push(a);for(a=b;a<this.length;a++)this.b[a]._i=a;this.store&&(b=this.store.splice(b,1)[0],this.store.push(b))}};
f.swap=function(a,b){if(a!==b){if("number"===typeof a){var d=a;a=this.b[a]}else d=a._i;if("number"===typeof b){var c=b;b=this.b[b]}else c=b._i;if(this.w){var e=a._m;this.update(a,b._m,null,c);this.update(b,e,null,d)}else this.root.insertBefore(a,b),this.root.insertBefore(b,d+1===c?a:this.b[d+1]),a._i=c,b._i=d,this.b[d]=b,this.b[c]=a;this.store&&(a=this.store[c],this.store[c]=this.store[d],this.store[d]=a)}return this};f=A.prototype;f._t=function(a,b){a._x!==b&&(a.nodeValue=b,a._x=b);return this};f._h=function(a,b){a._h!==b&&(a.innerHTML=b,a._h=b);return this};f._l=function(a,b){a._c!==b&&(a.className=b,a._c=b,a._cs=null);return this};f._s=function(a,b,d){var c=a._sc||(a._sc={});c[b]!==d&&(c[b]=d,(a._s||(a._s=a.style)).setProperty(b,d),a._cs=null);return this};f._c=function(a,b){a._cs!==b&&((a._s||(a._s=a.style)).cssText=b,a._cs=b,a._sc=null);return this};
f._a=function(a,b,d){var c="_a_"+b;a[c]!==d&&(a.setAttribute(b,d),a[c]=d);return this};var J=window.localStorage;A.prototype.export=function(){if(this.store)var a=this.store;else if(this.g){a=Array(this.length);for(var b=0;b<this.length;b++)a[b]=this.b[b]._m}a&&J.setItem(this.m,JSON.stringify(a));return this};A.prototype.import=function(){var a=J.getItem(this.m);a&&(a=JSON.parse(a),this.u?this.store.push.apply(this.store,a):this.store=a);return this};var K=window,L=K.requestAnimationFrame,M=K.cancelAnimationFrame,N={store:!1,loose:!0,cache:!0,async:!1,reuse:!0},O={},P={};function A(a,b,d){a.nodeType||(d=b,b=a,a=null);b||(d=a);a?this.mount(a):(this.root=this.b=null,this.length=0);this.init(b,d)}A.register=function(a,b){b||(b=a,a=b.n);P[a]=b;return A};A.new=function(a,b,d){return new A(a,b,d)};A.prototype.mount=function(a){this.root!==a&&(this.root=a,Q(this),this.b=a._d||(a._d=R(a.children)),this.length=this.b.length);return this};
var S={tap:1,change:1,click:1,dblclick:1,input:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,reset:1,select:1,submit:1,toggle:1,blur:1,error:1,focus:1,load:1,resize:1,scroll:1};f=A.prototype;f.sync=function(){this.root._d=this.b=R(this.root.children);this.length=this.b.length;return this};f.index=function(a){return a._i};f.node=function(a){return this.b[a]};
f.item=function(a){return this.g?this.b[a]._m:this.store[a]};f.init=function(a,b){this.config=b=b?Object.assign({},this.config||N,b):N;"string"===typeof a?a=P[a]:A.register(a);this.cache=b.cache;this.async=b.async;this.w=b.reuse;this.state=b.state||O;var d=b.store;d?(this.g=b.loose)?this.store=!1:(this.u="object"===typeof d,this.store=d&&(this.u?d:[])):this.g=this.store=!1;this.m!==a&&(this.m=a.n,this.o=this.f=null,this.l=!0,this.v=this.parse(a),Q(this));b.once&&this.render().destroy(!0);return this};
function Q(a){if(a.root){var b=a.root._t;b!==a.m&&(a.root._t=a.m,b&&a.clear())}}function R(a){for(var b=a.length,d=Array(b),c=0,e;c<b;c++)e=a[c],e._i=c,d[c]=e;return d}f.create=function(a,b,d){var c=this.v;this.l||this.o(c._p,a,d,b);return c.cloneNode(!0)};
f.refresh=function(a){if("number"===typeof a){var b=this.b[a];return this.update(b,this.storage?this.store[a]:b._m,null,a)}var d=(b=this.store)?b.length:this.g?this.length:0;this.g&&(this.store=null);for(var c=0;c<d;c++)this.update(this.b[c],b?b[c]:null,a,c);return this};var T;f=A.prototype;
f.render=function(a,b,d,c){"function"===typeof b&&(d=b,b=null);if(!c){if(d){var e=this;T=L(function(){T=null;e.render(a,b,null,!0);"function"===typeof d&&d()});return this}if(this.async){var l=this;return new Promise(function(k){T=L(function(){T=null;l.render(a,b,null,!0);k()})})}}if(this.l)this.b[0]||this.add();else if(a||this.g){c=a?a.length:this.length;this.w||this.clear(c);for(var h=0;h<c;h++)h<this.length?this.update(this.b[h],a[h],b,h):this.add(a[h],b,this.root);if(c<this.length){this.store&&
this.store.splice(c);h=this.b.splice(c);this.length=c;c=h.length;for(var m=0;m<c;m++)this.root.removeChild(h[m])}}return this};f.add=function(a,b,d){var c=this.length;b=this.create(a,b,c);this.store?this.store[c]=a:this.g&&(b._m=a);b._i=c;(d||this.root).appendChild(b);this.b[c]=b;this.length++;return this};f.clear=function(a){this.root._d=this.b=a?Array(a):[];this.root.textContent="";this.length=0;this.store&&(this.u?this.store.splice(0):this.store=a?Array(a):[]);this.cache&&(this.root._h=null);return this};
f.destroy=function(a){a&&this.unload();this.v=this.o=this.f=this.root=this.b=null};f.cancel=function(){T&&(M(T),T=null)};f.append=function(a,b){for(var d=a.length,c=0;c<d;c++)this.add(a[c],b);return this};f.remove=function(a){var b=a._i;this.b.splice(b,1);this.root.removeChild(a);this.length--;this.store&&this.store.splice(b,1);for(a=b;a<this.length;a++)this.b[a]._i=a;return this};
f.replace=function(a,b,d,c){"undefined"===typeof c&&(c=a._i);d=this.create(b,d,c);this.store?this.store[c]=b:this.g&&(d._m=b);d._i=c;this.root.replaceChild(d,a);this.b[c]=d;return this};f.update=function(a,b,d,c){this.store?this.store[c]=b:this.g&&(a._m=b);this.o(a._p||U(this,a),b,c,d);return this};
function U(a,b){for(var d=a.f.length,c={},e=Array(d),l=0;l<d;l++){var h=a.f[l],m=l,k;if(!(k=c[h])){k=b;for(var q="",n=0;n<h.length;n++){var p=h[n];q+=p;c[q]?k=c[q]:(">"===p?k=k.firstElementChild:"+"===p?k=k.nextElementSibling:"|"===p&&(k=k.firstChild),c[q]=k)}}e[m]=k}return b._p=e}var V;
A.prototype.parse=function(a,b,d,c){var e=document.createElement(a.t||"div");b||(b=0,d="&",V="",this.f=[],e._p=c=[]);var l=a.s,h=a.i,m=a.x,k=a.h,q=a.a,n=a.c,p=a.j;a=this.f.length;var u=0,r="";p&&(r+=p+";");n&&("object"===typeof n?(r+=this.cache?"._l(self,"+n[0]+")":"self.className="+n[0]+";",this.f[a]=d,c[a]=e,this.l=!1,u++):e.className=n);if(q){n=Object.keys(q);for(p=0;p<n.length;p++){var w=n[p],B=q[w];if("object"===typeof B){r+=this.cache?"._a(self,'"+w+"',"+B[0]+")":"self.setAttribute('"+w+"',"+
B[0]+");";var y=!0;u++}else e.setAttribute(w,B);S[w]&&this.listen(w)}y&&(this.f[a]=d,c[a]=e,this.l=!1)}if(l)if("string"===typeof l)e.style.cssText=l;else if(l.length)r+=this.cache?"._c(self,"+l[0]+")":"self.style.cssText="+l[0]+";",this.f[a]=d,c[a]=e,this.l=!1,u++;else{q=Object.keys(l);for(y=0;y<q.length;y++)if(n=q[y],p=l[n],"object"===typeof p){r+=this.cache?"._s(self,'"+n+"',"+p[0]+")":"self.style.setProperty('"+n+"',"+p[0]+");";var X=!0;u++}else e.style.setProperty(n,p);X&&(this.f[a]=d,c[a]=e,
this.l=!1)}h||(m?(d+="|",(l="object"===typeof m)&&(m=m[0]),k=document.createTextNode(m),l&&(c[a]&&(W(u,r,a,this.cache),r="",a++),r+=this.cache?"._t(self,"+m+")":"self.nodeValue="+m+";",this.f[a]=d,c[a]=k,this.l=!1,u++),e.appendChild(k)):k&&("object"===typeof k?(k=k[0],r+=this.cache?"._h(self, "+k+")":"self.innerHTML="+k+";",this.f[a]=d,c[a]=e,this.l=!1,u++):e.innerHTML=k));W(u,r,a,this.cache);if(h)if(h.length)for(m=">",a=0;a<h.length;a++)a&&(m+="+"),e.appendChild(this.parse(h[a],b+a+1,d+m,c));else e.appendChild(this.parse(h,
b+1,d+">",c));b||this.l||(this.o=Function("p","item","index","view",V?'"use strict";var self;'+V:""));return e};function W(a,b,d,c){a&&(1<a?(V+="self=p["+d+"];",c?V+="this"+b+";":V+=b):V=c?V+("this"+b.replace(/self/g,"p["+d+"]")+";"):V+("p["+d+"]"+b.substring(4)))}
A.prototype.load=function(a,b){if(P[a])this instanceof A&&this.init(P[a]),b&&b();else{var d=this,c=new XMLHttpRequest;c.overrideMimeType("application/json");c.open("GET",a,!1!==b);c.onload=function(){var e=this.responseText;if(e){try{var l=JSON.parse(e);A.register(a,l);d instanceof A&&d.init(l)}catch(m){var h=m}"function"===typeof b&&b(h)}};c.send()}};A.load=A.prototype.load;A.prototype.unload=function(a){a||(a=this.m);a&&(P[a]=null)};A.unload=A.prototype.unload;(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return A}):(b=a.modules)?b.mikado=A:"object"===typeof a.exports?a.module.exports=A:a.Mikado=A})();}).call(this);
