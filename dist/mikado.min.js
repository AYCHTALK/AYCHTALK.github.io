/**
 * Mikado.js v0.0.4
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/mikado
 */
(function(){'use strict';var h;var q=window,t=q.requestAnimationFrame,v=q.cancelAnimationFrame,x={},y={},z={};function A(a,b,d){a.nodeType||(d=b,b=a,a=null);b||(d=a,a=d.root,b=d.template);"string"===typeof b?b=x[b]:A.register(b);this.cache=!d||!1!==d.cache;this.u=d&&!!d.async;this.v=!d||!1!==d.reuse;this.store=d&&d.store&&[];a&&this.mount(a);B(this,b)}A.register=function(a,b){b||(b=a,a=b.n);x[a]=b};A.create=function(a,b,d){return new this(a,b,d)};
A.prototype.mount=function(a){if(this.f!==a){this.f=a;var b;if(!(b=a._d)){b=a.children;for(var d=b.length,c=Array(d),k=0,e;k<d;k++)e=b[k],e._i=k,c[k]=e;b=a._d=c}this.b=b;this.length=this.b.length}return this};var C={change:1,click:1,dblclick:1,input:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,reset:1,select:1,submit:1,toggle:1,blur:1,error:1,focus:1,load:1,resize:1,scroll:1};
function D(a){for(var b=a.target,d=a.type,c;b;){if(c=b.getAttribute(d)){if(-1!==c.indexOf(":"))for(c=c.split(":"),d=c[1],b=b.parentElement;b;){if(b.hasAttribute(d)){c=c[0];break}b=b.parentElement}if(c=z[c])c(b),a.preventDefault(),a.stopPropagation();break}b=b.parentElement}}A.prototype.get=function(a){return this.b[a]};var E=0;function B(a,b){a.o!==b&&(a.o=b,a.id=++E,a.g=null,a.m=null,a.clone=null,a.l=!0,a.state={})}
A.prototype.create=function(a,b,d){var c=this.clone;c||(this.clone=c=F(this,this.o));this.l||this.m(c._p,a,d,b);return c.cloneNode(!0)};var G;h=A.prototype;
h.render=function(a,b,d,c){a?"function"===typeof a?(d=a,a=this.store):"function"===typeof b&&(d=b,b=null):a=this.store;if(!c){if(d){var k=this;G=t(function(){G=null;k.render(a,b,null,!0);"function"===typeof d&&d()});return this}if(this.u){var e=this;return new Promise(function(r){G=t(function(){G=null;e.render(a,b,null,!0);r()})})}}(c=this.f._t)?c!==this.id&&(this.f._t=this.id,this.f.textContent="",this.f._d=this.b=[],this.store&&(this.store=[]),this.length=0,this.cache&&(this.f._h=null)):this.f._t=
this.id;if(a){c=a.length;for(var f,l=0,g=void 0,m=void 0;l<c;l++)m=a[l],(g=this.b[l])?this.v?this.update(g,m,b,l):this.replace(g,m,b,l):this.add(m,b,f||(f=document.createDocumentFragment()));f&&this.f.appendChild(f);if(c<this.length)for(this.store&&this.store.splice(c),f=this.b.splice(c),this.length=c,c=f.length,l=0;l<c;l++)this.f.removeChild(f[l])}else this.b[0]||this.add();return this};
h.add=function(a,b,d){var c=this.length;b=this.create(a,b,c);b._i=c;(d||this.f).appendChild(b);this.store&&(this.store[c]=a);this.b[c]=b;this.length++;return this};h.cancel=function(){G&&(v(G),G=null)};h.append=function(a,b){for(var d=a.length,c=0;c<d;c++)this.add(a[c],b);return this};h.remove=function(a){var b=a._i;this.b.splice(b,1);this.store&&this.store.splice(b,1);this.f.removeChild(a);this.length--;for(a=b;a<this.length;a++)this.b[a]._i=a;return this};
h.up=function(a){if(a=a._i){var b=this.b[a],d=this.b[a-1];this.f.insertBefore(b,d);b._i=a-1;d._i=a;this.b[a]=d;this.b[a-1]=b;this.store&&(b=this.store[a-1],this.store[a-1]=this.store[a],this.store[a]=b)}};h.down=function(a){a=a._i;if(a<this.length-1){var b=this.b[a],d=this.b[a+1];a===this.length-2?this.f.appendChild(b):this.f.insertBefore(b,d);b._i=a+1;d._i=a;this.b[a]=d;this.b[a+1]=b;this.store&&(b=this.store[a+1],this.store[a+1]=this.store[a],this.store[a]=b)}};
h.first=function(a){var b=a._i;if(b){this.f.insertBefore(a,this.b[0]);a=this.b.splice(b,1)[0];this.b.unshift(a);for(a=0;a<=b;a++)this.b[a]._i=a;this.store&&(b=this.store.splice(b,1)[0],this.store.unshift(b))}};h.last=function(a){var b=a._i;if(b<this.length-1){this.f.appendChild(a);a=this.b.splice(b,1)[0];this.b.push(a);for(a=b;a<this.length;a++)this.b[a]._i=a;this.store&&(b=this.store.splice(b,1)[0],this.store.push(b))}};
h.swap=function(a,b){if(a!==b){var d=b.nextSibling;d===a?this.f.insertBefore(a,b):(this.f.insertBefore(b,a),d?this.f.insertBefore(a,d):this.f.appendChild(a));d=a._i;var c=b._i;a._i=c;b._i=d;this.b[d]=b;this.b[c]=a;this.store&&(a=this.store[c],this.store[c]=this.store[d],this.store[d]=a)}return this};h.replace=function(a,b,d,c){"undefined"===typeof c&&(c=a._i);d=this.create(b,d,c);a.replaceWith(d);this.b[c]=d;this.store&&(this.store[c]=b);return this};
h.update=function(a,b,d,c){this.l||("undefined"===typeof c&&(c=a._i),this.store&&(b?this.store[c]=b:b=this.store[c]),this.m(a._p||H(this,a),b,c,d));return this};function H(a,b){for(var d=a.g.length,c={},k=Array(d),e=0;e<d;e++){var f=a.g[e],l=e,g;if(!(g=c[f])){g=b;for(var m="",r=0;r<f.length;r++){var n=f[r];m+=n;c[m]?g=c[m]:(">"===n?g=g.firstElementChild:"+"===n?g=g.nextElementSibling:"|"===n&&(g=g.firstChild),c[m]=g)}}k[l]=g}return b._p=k}var I;
function F(a,b,d,c,k){var e=document.createElement(b.t||"div");d||(d=0,c="&",I="",a.g=[],e._p=k=[]);var f=b.s,l=b.i,g=b.x,m=b.h,r=b.a,n=b.c,u=b.j;b=a.g.length;I+=";self=p["+b+"];";u&&(I+=u+";");a.cache&&(I+="this");n&&("object"===typeof n?(I+=a.cache?"._l(self,"+n[0]+")":"self.className="+n[0]+";",a.g[b]=c,k[b++]=e,a.l=!1):e.className=n);if(r)for(n=Object.keys(r),u=0;u<n.length;u++){var p=n[u],w=r[p];"object"===typeof w?(I+=a.cache?"._a(self,'"+p+"',"+w[0]+")":"self.setAttribute('"+p+"',"+w[0]+");",
a.g[b]=c,k[b++]=e,a.l=!1):(e.setAttribute(p,w),a.cache&&(e["_a_"+p]=w));C[p]&&!y[p]&&(window.addEventListener(p,D,!0),y[p]=1)}if(f)if("string"===typeof f)a.cache?a._c(e,f):e.style.cssText=f;else if(f.length)I+=a.cache?"._c(self,"+f[0]+")":"self.style.cssText="+f[0]+";",a.g[b]=c,k[b++]=e;else for(r=Object.keys(f),n=0;n<r.length;n++)u=r[n],p=f[u],"object"===typeof p?(I+=a.cache?"._s(self,'"+u+"',"+p[0]+")":"self.style.setProperty('"+u+"',"+p[0]+");",a.g[b]=c,k[b++]=e,a.l=!1):a.cache?a._s(e,u,p):e.style.setProperty(u,
p);if(l)if(l.length)for(g=">",b=0;b<l.length;b++)b&&(g+="+"),e.appendChild(F(a,l[b],d+b+1,c+g,k));else e.appendChild(F(a,l,d+1,c+">",k));else g?(c+="|",(l="object"===typeof g)&&(g=g[0]),f=document.createTextNode(g),l&&(I+=a.cache?"._t(self,"+g+")":"self.nodeValue="+g+";",a.g[b]=c,k[b++]=f,a.l=!1),e.appendChild(f),a.cache&&(f._x=g)):m&&("object"===typeof m?(m=m[0],I+=a.cache?"._h(self, "+m+")":"self.innerHTML="+m+";",a.g[b]=c,k[b++]=e,a.l=!1):e.innerHTML=m,a.cache&&(e._h=m));d||a.l||(a.m=Function("p",
"item","index","view",I?'"use strict";var root=p[0],self'+I:""));return e}A.prototype._t=function(a,b){a._x!==b&&(a.nodeValue=b,a._x=b);return this};A.prototype._h=function(a,b){a._h!==b&&(a.innerHTML=b,a._h=b);return this};A.prototype._l=function(a,b){a._c!==b&&(a.className=b,a._c=b,a._cs=null);return this};A.prototype._s=function(a,b,d){var c=a._sc||(a._sc={});c[b]!==d&&(c[b]=d,(a._s||(a._s=a.style)).setProperty(b,d),a._cs=null);return this};
A.prototype._c=function(a,b){a._cs!==b&&((a._s||(a._s=a.style)).cssText=b,a._cs=b,a._sc=null);return this};A.prototype._a=function(a,b,d){var c="_a_"+b;a[c]!==d&&(a.setAttribute(b,d),a[c]=d);return this};
A.prototype.load=function(a,b){if(x[a])this instanceof A&&B(this,x[a]),b&&b();else{var d=this,c=new XMLHttpRequest;c.overrideMimeType("application/json");c.open("GET",a,!1!==b);c.onload=function(){var k=this.responseText;if(k){try{var e=JSON.parse(k);A.register(a,e);d instanceof A&&B(d,e)}catch(l){var f=l}"function"===typeof b&&b(f)}};c.send()}};A.load=A.prototype.load;(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return A}):(b=a.modules)?b.mikado=A:"object"===typeof a.exports?a.module.exports=A:a.Mikado=A})();}).call(this);
