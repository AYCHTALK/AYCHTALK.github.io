/**
 * Mikado.js v0.0.7
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/mikado
 */
(function(){'use strict';var k;var p=window,w=p.requestAnimationFrame,x=p.cancelAnimationFrame,z={},B={},C={};function D(a,b,c){a.nodeType||(c=b,b=a,a=null);b||(c=a,a=c.root,b=c.template);"string"===typeof b?b=z[b]:D.register(b);this.cache=!c||!1!==c.cache;this.w=c&&!!c.async;this.u=!c||!1!==c.reuse;(this.m=c&&!!c.loose)?this.store=!1:this.store=(c=c&&c.store)&&("object"===typeof c?c:[]);a&&this.mount(a);E(this,b)}D.register=function(a,b){b||(b=a,a=b.n);z[a]=b};D["new"]=function(a,b,c){return new this(a,b,c)};
D.prototype.mount=function(a){if(this.f!==a){this.f=a;F(this);var b;if(!(b=a._d)){b=a.children;for(var c=b.length,d=Array(c),e=0,f;e<c;e++)f=b[e],f._i=e,d[e]=f;b=a._d=d}this.b=b;this.length=this.b.length}return this};
var G={tap:1,change:1,click:1,dblclick:1,input:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,reset:1,select:1,submit:1,toggle:1,blur:1,error:1,focus:1,load:1,resize:1,scroll:1};function H(a,b,c){window.addEventListener(a,b,c||{passive:!0,capture:!0})}
function I(a,b){b||(b=a.type);var c=a.target,d=c,e=c["_e_"+b];if(e)d=c["_r_"+b];else{for(;d;){if(d===J)return;if(e=d.getAttribute(b)){if(-1!==e.indexOf(":")){var f=e.split(":"),g=f[1];e=0;for(d=d.parentElement;d!==J;){if(d.hasAttribute(g)){e=f[0];break}d=d.parentElement}}break}d=d.parentElement}if(!e)return;c["_e_"+b]=e;c["_r_"+b]=d}(b=C[e])&&b(d);a.stopPropagation()}var J=document.body,K="ontouchstart"in window||navigator.msMaxTouchPoints,L,M,N;
if(K){var O=function(a,b){b&&(b=b[0]);L=b?b.clientX:a.pageX;M=b?b.clientY:a.pageY},P=function(a){var b=L,c=M;O(a,a.changedTouches);50>Math.abs(L-b)&&50>Math.abs(M-c)&&I.call(this,a,"click")},Q=function(a){O(a,a.touches)};N=function(){H("touchstart",Q,!1);H("touchend",P,!1)}}var R=0;function E(a,b){a.v!==b&&(a.v=b,a.id=++R,a.g=null,a.o=null,a.clone=null,a.l=!0,F(a));a.state={}}
function F(a){if(a.f){var b=a.f._t;b!==a.id&&(a.f._t=a.id,b&&(a.f.textContent="",a.f._d=a.b=[],a.length=0,a.store&&(a.store=[]),a.cache&&(a.f._h=null)))}}D.prototype.create=function(a,b,c){var d=this.clone;d||(this.clone=d=S(this,this.v));this.l||this.o(d._p,a,c,b);b=d.cloneNode(!0);this.m&&(b._m=a);return b};var T;k=D.prototype;
k.render=function(a,b,c,d){a?"function"===typeof a?(c=a,a=this.store):"function"===typeof b&&(c=b,b=null):a=this.store;if(!d){if(c){var e=this;T=w(function(){T=null;e.render(a,b,null,!0);"function"===typeof c&&c()});return this}if(this.w){var f=this;return new Promise(function(q){T=w(function(){T=null;f.render(a,b,null,!0);q()})})}}if(a){d=a.length;for(var g,l=0,h=void 0,m=void 0;l<d;l++)m=a[l],(h=this.b[l])?this.u?this.update(h,m,b,l):this.replace(h,m,b,l):this.add(m,b,g||(g=document.createDocumentFragment()));
g&&this.f.appendChild(g);if(d<this.length)for(this.store&&this.store.splice(d),g=this.b.splice(d),this.length=d,d=g.length,l=0;l<d;l++)this.f.removeChild(g[l])}else this.b[0]||this.add();return this};k.add=function(a,b,c){var d=this.length;b=this.create(a,b,d);this.store?this.store[d]=a:this.m&&(b._m=a);b._i=d;(c||this.f).appendChild(b);this.b[d]=b;this.length++;return this};k.cancel=function(){T&&(x(T),T=null)};k.append=function(a,b){for(var c=a.length,d=0;d<c;d++)this.add(a[d],b);return this};
k.remove=function(a){var b=a._i;this.b.splice(b,1);this.f.removeChild(a);this.length--;this.store&&this.store.splice(b,1);for(a=b;a<this.length;a++)this.b[a]._i=a;return this};k.up=function(a){if(a=a._i){var b=this.b[a],c=this.b[a-1];this.f.insertBefore(b,c);b._i=a-1;c._i=a;this.b[a]=c;this.b[a-1]=b;this.store&&(b=this.store[a-1],this.store[a-1]=this.store[a],this.store[a]=b)}};
k.down=function(a){a=a._i;if(a<this.length-1){var b=this.b[a],c=this.b[a+1];a===this.length-2?this.f.appendChild(b):this.f.insertBefore(b,c);b._i=a+1;c._i=a;this.b[a]=c;this.b[a+1]=b;this.store&&(b=this.store[a+1],this.store[a+1]=this.store[a],this.store[a]=b)}};k.first=function(a){var b=a._i;if(b){this.f.insertBefore(a,this.b[0]);a=this.b.splice(b,1)[0];this.b.unshift(a);for(a=0;a<=b;a++)this.b[a]._i=a;this.store&&(b=this.store.splice(b,1)[0],this.store.unshift(b))}};
k.last=function(a){var b=a._i;if(b<this.length-1){this.f.appendChild(a);a=this.b.splice(b,1)[0];this.b.push(a);for(a=b;a<this.length;a++)this.b[a]._i=a;this.store&&(b=this.store.splice(b,1)[0],this.store.push(b))}};
k.swap=function(a,b){if(a!==b){if("number"===typeof a){var c=a;a=this.b[a]}else c=a._i;if("number"===typeof b){var d=b;b=this.b[b]}else d=b._i;if(this.u){var e=a._m;this.update(a,b._m,null,d);this.update(b,e,null,c)}else this.f.insertBefore(a,b),this.f.insertBefore(b,c+1===d?a:this.b[c+1]),a._i=d,b._i=c,this.b[c]=b,this.b[d]=a;this.store&&(a=this.store[d],this.store[d]=this.store[c],this.store[c]=a)}return this};
k.replace=function(a,b,c,d){"undefined"===typeof d&&(d=a._i);c=this.create(b,c,d);this.store?this.store[d]=b:this.m&&(c._m=b);a.replaceWith(c);this.b[d]=c;return this};k.update=function(a,b,c,d){this.l||("number"===typeof a?(d=a,a=this.b[a]):"undefined"===typeof d&&(d=a._i),this.store?b?this.store[d]=b:b=this.store[d]:this.m&&(b?a._m=b:b=a._m),this.o(a._p||U(this,a),b,d,c));return this};
function U(a,b){for(var c=a.g.length,d={},e=Array(c),f=0;f<c;f++){var g=a.g[f],l=f,h;if(!(h=d[g])){h=b;for(var m="",q=0;q<g.length;q++){var n=g[q];m+=n;d[m]?h=d[m]:(">"===n?h=h.firstElementChild:"+"===n?h=h.nextElementSibling:"|"===n&&(h=h.firstChild),d[m]=h)}}e[l]=h}return b._p=e}var V;
function S(a,b,c,d,e){var f=document.createElement(b.t||"div");c||(c=0,d="&",V="",a.g=[],f._p=e=[]);var g=b.s,l=b.i,h=b.x,m=b.h,q=b.a,n=b.c,r=b.j;b=a.g.length;var v=0,t="";r&&(t+=r+";");a.cache&&(t+="this");n&&("object"===typeof n?(t+=a.cache?"._l(self,"+n[0]+")":"self.className="+n[0]+";",a.g[b]=d,e[b]=f,a.l=!1,v++):f.className=n);if(q){n=Object.keys(q);for(r=0;r<n.length;r++){var u=n[r],A=q[u];if("object"===typeof A){t+=a.cache?"._a(self,'"+u+"',"+A[0]+")":"self.setAttribute('"+u+"',"+A[0]+");";
var y=!0}else f.setAttribute(u,A);G[u]&&!B[u]&&(K&&"click"===u?N():H(u,I,!0),B[u]=1)}y&&(a.g[b]=d,e[b]=f,a.l=!1,v++)}if(g)if("string"===typeof g)f.style.cssText=g;else if(g.length)t+=a.cache?"._c(self,"+g[0]+")":"self.style.cssText="+g[0]+";",a.g[b]=d,e[b]=f,v++;else{q=Object.keys(g);for(y=0;y<q.length;y++)if(n=q[y],r=g[n],"object"===typeof r){t+=a.cache?"._s(self,'"+n+"',"+r[0]+")":"self.style.setProperty('"+n+"',"+r[0]+");";var W=!0}else f.style.setProperty(n,r);W&&(a.g[b]=d,e[b]=f,a.l=!1,v++)}l||
(h?(d+="|",(g="object"===typeof h)&&(h=h[0]),m=document.createTextNode(h),g&&(t+=a.cache?"._t(self,"+h+")":"self.nodeValue="+h+";",e[b]&&b++,a.g[b]=d,e[b]=m,a.l=!1,v++),f.appendChild(m)):m&&("object"===typeof m?(m=m[0],t+=a.cache?"._h(self, "+m+")":"self.innerHTML="+m+";",a.g[b]=d,e[b]=f,a.l=!1,v++):f.innerHTML=m));v&&(V=1<v?V+("self=p["+b+"];"+t):V+("p["+b+"]"+t.substring(4)));if(l)if(l.length)for(h=">",b=0;b<l.length;b++)b&&(h+="+"),f.appendChild(S(a,l[b],c+b+1,d+h,e));else f.appendChild(S(a,l,
c+1,d+">",e));c||a.l||(a.o=Function("p","item","index","view",V?'"use strict";var self;'+V:""));return f}D.prototype._t=function(a,b){a._x!==b&&(a.nodeValue=b,a._x=b);return this};D.prototype._h=function(a,b){a._h!==b&&(a.innerHTML=b,a._h=b);return this};D.prototype._l=function(a,b){a._c!==b&&(a.className=b,a._c=b,a._cs=null);return this};D.prototype._s=function(a,b,c){var d=a._sc||(a._sc={});d[b]!==c&&(d[b]=c,(a._s||(a._s=a.style)).setProperty(b,c),a._cs=null);return this};
D.prototype._c=function(a,b){a._cs!==b&&((a._s||(a._s=a.style)).cssText=b,a._cs=b,a._sc=null);return this};D.prototype._a=function(a,b,c){var d="_a_"+b;a[d]!==c&&(a.setAttribute(b,c),a[d]=c);return this};
D.prototype.load=function(a,b){if(z[a])this instanceof D&&E(this,z[a]),b&&b();else{var c=this,d=new XMLHttpRequest;d.overrideMimeType("application/json");d.open("GET",a,!1!==b);d.onload=function(){var e=this.responseText;if(e){try{var f=JSON.parse(e);D.register(a,f);c instanceof D&&E(c,f)}catch(l){var g=l}"function"===typeof b&&b(g)}};d.send()}};D.load=D.prototype.load;(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return D}):(b=a.modules)?b.mikado=D:"object"===typeof a.exports?a.module.exports=D:a.Mikado=D})();}).call(this);
